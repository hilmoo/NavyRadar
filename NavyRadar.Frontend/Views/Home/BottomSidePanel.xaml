<UserControl
    x:Class="NavyRadar.Frontend.Views.Home.BottomSidePanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:NavyRadar.Frontend.ViewModels"
    d:Background="White"
    d:DataContext="{d:DesignInstance Type=vm:HomeVm}"
    d:DesignHeight="1000"
    d:DesignWidth="300"
    mc:Ignorable="d">
    <Border
        BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
        BorderThickness="1"
        CornerRadius="8">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="12" Orientation="Vertical">

                <StackPanel.Resources>
                    <Style x:Key="PortVisibilityStyle" TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedPort}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>

                    <Style x:Key="ShipVisibilityStyle" TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedShip}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>

                    <Style x:Key="SailVisibilityStyle" TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedSail}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>

                    <Style x:Key="DetailGrid" TargetType="Grid">
                        <Setter Property="Margin" Value="0,5,0,0" />
                    </Style>

                    <Style x:Key="Label" TargetType="TextBlock">
                        <Setter Property="FontWeight" Value="Bold" />
                        <Setter Property="Margin" Value="0,0,10,5" />
                    </Style>

                    <Style x:Key="Value" TargetType="TextBlock">
                        <Setter Property="Margin" Value="0,0,0,5" />
                    </Style>

                    <Style x:Key="EmptyStateStyle" TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="FontStyle" Value="Italic" />
                        <Setter Property="Margin" Value="20" />
                        <Style.Triggers>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding SelectedPort}" Value="{x:Null}" />
                                    <Condition Binding="{Binding SelectedShip}" Value="{x:Null}" />
                                    <Condition Binding="{Binding SelectedSail}" Value="{x:Null}" />
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Visibility" Value="Visible" />
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>

                    <Style x:Key="HasSelectionStyle" TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding SelectedPort}" Value="{x:Null}" />
                                    <Condition Binding="{Binding SelectedShip}" Value="{x:Null}" />
                                    <Condition Binding="{Binding SelectedSail}" Value="{x:Null}" />
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Visibility" Value="Collapsed" />
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>

                </StackPanel.Resources>

                <TextBlock Style="{StaticResource EmptyStateStyle}" Text="No item selected." />

                <StackPanel Style="{StaticResource HasSelectionStyle}">

                    <StackPanel Style="{StaticResource PortVisibilityStyle}">
                        <TextBlock
                            FontSize="16"
                            FontWeight="Bold"
                            Text="Port Data" />
                        <Grid Style="{StaticResource DetailGrid}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Name:" />
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedPort.Name, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Country:" />
                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedPort.CountryCode, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Longitude:" />
                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedPort.Location.X, FallbackValue=N/A, TargetNullValue=N/A}" />
                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Latitude:" />
                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedPort.Location.Y, FallbackValue=N/A, TargetNullValue=N/A}" />
                        </Grid>
                    </StackPanel>

                    <StackPanel Margin="0,15,0,0" Style="{StaticResource ShipVisibilityStyle}">
                        <TextBlock
                            FontSize="16"
                            FontWeight="Bold"
                            Text="Ship Data" />
                        <Grid Style="{StaticResource DetailGrid}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Name:" />
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedShip.Name, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="IMO:" />
                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedShip.ImoNumber, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="MMSI:" />
                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedShip.MmsiNumber, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Type:" />
                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedShip.Type, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="4"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Built:" />
                            <TextBlock
                                Grid.Row="4"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedShip.YearBuild, FallbackValue=N/A, TargetNullValue=N/A}" />
                        </Grid>
                    </StackPanel>
                    <Separator Margin="0,5" />
                    <StackPanel Margin="0,15,0,0" Style="{StaticResource SailVisibilityStyle}">
                        <TextBlock
                            FontSize="16"
                            FontWeight="Bold"
                            Text="Sail Data" />
                        <Grid Style="{StaticResource DetailGrid}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Status:" />
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedSail.Status, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Departure:" />
                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedSail.DepartureTime, StringFormat=g, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="Arrival:" />
                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedSail.ArrivalTime, StringFormat=g, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="From Port ID:" />
                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedSail.OriginPortId, FallbackValue=N/A, TargetNullValue=N/A}" />

                            <TextBlock
                                Grid.Row="4"
                                Grid.Column="0"
                                Style="{StaticResource Label}"
                                Text="To Port ID:" />
                            <TextBlock
                                Grid.Row="4"
                                Grid.Column="1"
                                Style="{StaticResource Value}"
                                Text="{Binding SelectedSail.DestinationPortId, FallbackValue=N/A, TargetNullValue=N/A}" />
                        </Grid>
                    </StackPanel>


                    <Button
                        Margin="0,15,0,0"
                        HorizontalAlignment="Stretch"
                        Command="{Binding ClearSelectionCommand}"
                        Content="Clear Selection" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Border>
</UserControl>